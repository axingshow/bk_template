webpackJsonp([0],{"3cXf":function(e,t,a){e.exports={default:a("NUnD"),__esModule:!0}},"7MhD":function(e,t){},"9Pyf":function(e,t,a){var s=a("y4M0"),n=a("jdnV");e.exports=a("/KQr").getIterator=function(e){var t=n(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return s(t.call(e))}},A8gV:function(e,t){},HzJ8:function(e,t,a){e.exports={default:a("fL6L"),__esModule:!0}},MZmk:function(e,t){},NUnD:function(e,t,a){var s=a("/KQr"),n=s.JSON||(s.JSON={stringify:JSON.stringify});e.exports=function(e){return n.stringify.apply(n,arguments)}},UaHR:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("3cXf"),n=a.n(s),i={data:function(){return{currentPage:1,pageSize:10,pager:5}},props:{total:Number},methods:{handleSizeChange:function(e){this.pageSize=e,this.$emit("page-size-change",{pageSize:this.pageSize,currentPage:this.currentPage})},handleCurrentChange:function(e){this.currentPage=e,this.$emit("page-size-change",{pageSize:this.pageSize,currentPage:this.currentPage})}}},o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"pagination"}},[t("el-pagination",{attrs:{"current-page":this.currentPage,"page-sizes":[10,20,50,100],"pager-count":this.pager,layout:"total, sizes, prev, pager, next, jumper",total:this.total},on:{"size-change":this.handleSizeChange,"current-change":this.handleCurrentChange}})],1)},staticRenderFns:[]};var r=a("C7Lr")(i,o,!1,function(e){a("MZmk")},null,null).exports,l={props:{title:{type:String,default:""},width:{type:String,default:""},dialogAction:{type:String,default:""}},data:function(){return{isShow:!1}},methods:{open:function(){this.isShow=!0},confirm:function(){this.$emit("handle-success",this.dialogAction)},cancel:function(){this.isShow=!1}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dialog"},[a("el-dialog",{attrs:{title:e.title,visible:e.isShow,width:e.width},on:{"update:visible":function(t){e.isShow=t}}},[e._t("dialog-content"),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.confirm}},[e._v("确 定")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:e.cancel}},[e._v("取 消")])],1)],2)],1)},staticRenderFns:[]};var c=a("C7Lr")(l,u,!1,function(e){a("A8gV")},null,null).exports;function p(e,t,a){/^[a-zA-Z0-9_]+$/.test(t)?a():a(new Error("只能由英文、数字、下划线组成"))}function h(e,t,a){/^[\u4e00-\u9fa5]+$/.test(t)?a():a(new Error("只能输入中文"))}a("HzJ8");var d={components:{Pagination:r,NewEdit:c},data:function(){return{inputGroup:"",title:"",dialogAction:"",activeName:"second",width:"40%",valueIsBuiltIn:void 0,valueIsEnable:void 0,labelPosition:"right",totalNumber:0,currentPage:1,pageSize:10,loadingGroup:!1,loadingLeft:!1,loadingRight:!1,data:[],leftData:[],rightData:[],formGroups:{name:"",display_name:"",users:[],desc:""},rulesGroups:{name:[{required:!0,message:"请输入组名"},{max:20,message:"长度在20个字符之内"},{validator:p}],display_name:[{required:!0,message:"请输入显示名"},{max:14,message:"长度在14个字符之内"},{validator:h}]},optionsIsBuiltIn:[{value:!0,label:"是"},{value:!1,label:"否"}],optionsIsEnable:[{value:!0,label:"是"},{value:!1,label:"否"}]}},created:function(){this.search(),this.getLeftUser()},methods:{search:function(){var e=this,t={page:this.currentPage,page_size:this.pageSize,is_built_in:this.valueIsBuiltIn,is_enable:this.valueIsEnable,display_name:this.inputGroup,omit:"menus,permissions"};this.loadingGroup=!0,this.$store.dispatch("group/getGroups",t).then(function(t){t.result&&(e.loadingGroup=!1,e.data=t.data.items,e.totalNumber=t.data.count)})},pageSizeChange:function(e){this.currentPage=e.currentPage,this.pageSize=e.pageSize,this.search({page:this.currentPage,page_size:this.pageSize})},reset:function(){this.inputGroup="",this.valueIsBuiltIn=void 0,this.valueIsEnable=void 0,this.search()},handleEdit:function(e){this.dialogAction="edit",this.title="编辑",this.$refs.newEdit.open(),this.formGroups=JSON.parse(n()(e.row)),this.formGroups.users=this.formGroups.users.map(function(e){return e.id}),this.rightData=e.row.users},handleNew:function(){var e=this;this.dialogAction="new",this.title="新建",this.formGroups={users:[]},this.rightData=[],this.leftData=[],this.$refs.newEdit.open(),this.$nextTick(function(){e.$refs.formGroups.clearValidate()})},checkboxChange:function(e){var t=this,a=e.is_enable?"是否启用":"是否禁用";this.$confirm(a,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){if(1==e.is_enable){var a={groups:[e.id],enable:!0};t.$store.dispatch("group/groupsStatus",a).then(function(a){a.result?t.$message({type:"success",message:a.message}):(e.is_enable=!e.is_enable,t.$message({type:"error",message:a.message}))})}else if(0==e.is_enable){var s={groups:[e.id],enable:!1};t.$store.dispatch("group/groupsStatus",s).then(function(a){a.result?t.$message({type:"success",message:a.message}):(e.is_enable=!e.is_enable,t.$message({type:"error",message:a.message}))})}}).catch(function(){e.is_enable=!e.is_enable,t.$message({type:"info",message:"调取接口失败"})})},handleAuthority:function(e){this.$router.push(e)},handleSuccess:function(e){var t=this;if("new"==this.dialogAction){var a={name:this.formGroups.name,description:this.formGroups.desc,users:this.formGroups.users};this.$store.dispatch("group/addGroups",a).then(function(e){e.result?(t.search(),t.$message({type:"success",message:e.message})):t.$message({type:"error",message:e.message})}).catch(function(){t.$message({type:"info",message:"接口调用失败"})})}else if("edit"==this.dialogAction){var s=this.formGroups;this.$store.dispatch("group/editGroups",s).then(function(e){e.result?t.$message({type:"success",message:e.message}):t.$message({type:"error",message:e.message})}).catch(function(){t.$message({type:"info",message:"接口调用失败"})})}this.$refs.newEdit.cancel()},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={id:e.row.id};t.$store.dispatch("group/deleteGroups",a).then(function(e){e.result?(t.search(),t.$message({type:"success",message:e.message})):t.$message({type:"error",message:e.message})})}).catch(function(){t.$message({type:"info",message:"已取消"})})},getLeftUser:function(){var e=this;this.$store.dispatch("group/getAllUser").then(function(t){t.result&&(e.leftData=t.data)})},addRightItems:function(){},handleSelectionChange:function(){}}},g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"group"},[a("div",{staticClass:"contain"},[a("div",{staticClass:"search"},[a("el-row",[a("el-col",{attrs:{span:6}},[a("span",{staticClass:"aglin"},[e._v("角色名：")]),e._v(" "),a("el-input",{staticClass:"aglin-input",attrs:{size:"mini",clearable:"",placeholder:"请输入内容"},model:{value:e.inputGroup,callback:function(t){e.inputGroup=t},expression:"inputGroup"}})],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("span",{staticClass:"aglin"},[e._v("是否内置：")]),e._v(" "),a("el-select",{attrs:{size:"mini",clearable:"",placeholder:"请选择"},model:{value:e.valueIsBuiltIn,callback:function(t){e.valueIsBuiltIn=t},expression:"valueIsBuiltIn"}},e._l(e.optionsIsBuiltIn,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("span",{staticClass:"aglin"},[e._v("是否启用：")]),e._v(" "),a("el-select",{attrs:{size:"mini",clearable:"",placeholder:"请选择"},model:{value:e.valueIsEnable,callback:function(t){e.valueIsEnable=t},expression:"valueIsEnable"}},e._l(e.optionsIsEnable,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{size:"mini",type:"primary"},nativeOn:{click:function(t){return e.search(t)}}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"mini"},nativeOn:{click:function(t){return e.reset(t)}}},[e._v("重置")])],1)],1)],1),e._v(" "),a("div",{staticClass:"new"},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.handleNew}},[e._v("新建角色")])],1),e._v(" "),a("div",{staticClass:"table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingGroup,expression:"loadingGroup"}],ref:"",staticStyle:{width:"100%"},attrs:{stripe:"",data:e.data,height:"100%"}},[a("el-table-column",{attrs:{prop:"name",label:"组名","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"display_name",label:"显示名","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"是否内置"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(0==t.is_built_in?"否":"是"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"是否启用"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{on:{change:function(a){return e.checkboxChange(t.row)}},model:{value:t.row.is_enable,callback:function(a){e.$set(t.row,"is_enable",a)},expression:"scope.row.is_enable"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"description",label:"描述","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"handle",label:"操作",fixed:"right",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleEdit(t)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleAuthority({name:"permission",params:{group_id:t.row.id}})}}},[e._v("权限")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleDelete(t)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("pagination",{attrs:{total:e.totalNumber},on:{"page-size-change":e.pageSizeChange}}),e._v(" "),a("new-edit",{ref:"newEdit",attrs:{title:e.title,"dialog-action":"dialogAction",width:e.width},on:{"handle-success":e.handleSuccess}},[a("div",{attrs:{slot:"dialog-content"},slot:"dialog-content"},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"角色信息",name:"first"}},[a("el-form",{ref:"formGroups",attrs:{"label-position":e.labelPosition,"label-width":"120px",model:e.formGroups,rules:e.rulesGroups}},[a("el-form-item",{attrs:{label:"组名",prop:"name"}},[a("el-input",{staticClass:"form-content",attrs:{size:"mini"},model:{value:e.formGroups.name,callback:function(t){e.$set(e.formGroups,"name",t)},expression:"formGroups.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"显示名",prop:"display_name"}},[a("el-input",{staticClass:"form-content",attrs:{size:"mini"},model:{value:e.formGroups.display_name,callback:function(t){e.$set(e.formGroups,"display_name",t)},expression:"formGroups.display_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{staticClass:"form-content",attrs:{type:"textarea"},model:{value:e.formGroups.desc,callback:function(t){e.$set(e.formGroups,"desc",t)},expression:"formGroups.desc"}})],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"分配用户",name:"second"}},[a("div",[a("el-row",[a("el-col",{attrs:{span:10}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingLeft,expression:"loadingLeft"}],staticStyle:{width:"100%","margin-bottom":"0px"},attrs:{data:e.leftData,border:"",height:"280"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",prop:"value"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"用户名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"chname",label:"中文名"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("div",{staticStyle:{"margin-top":"100%","margin-left":"21%","margin-right":"25%"}},[a("el-button",{attrs:{type:"primary",icon:"icon el-icon-d-arrow-right"},on:{click:e.addRightItems}})],1)]),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingRight,expression:"loadingRight"}],staticStyle:{width:"100%","margin-bottom":"0px"},attrs:{data:e.rightData,height:"280",border:""}},[a("el-table-column",{attrs:{type:"selection",prop:"value"}}),e._v(" "),a("el-table-column",{attrs:{label:"用户名",prop:"username"}}),e._v(" "),a("el-table-column",{attrs:{prop:"chname",label:"中文名","show-overflow-tooltip":""}})],1)],1)],1)],1)])],1)],1)])],1)])},staticRenderFns:[]};var m=a("C7Lr")(d,g,!1,function(e){a("7MhD")},null,null);t.default=m.exports},fL6L:function(e,t,a){a("MKOc"),a("rYUz"),e.exports=a("9Pyf")}});
//# sourceMappingURL=0.js.map